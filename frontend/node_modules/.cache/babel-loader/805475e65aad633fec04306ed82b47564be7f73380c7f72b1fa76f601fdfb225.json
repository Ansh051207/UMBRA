{"ast":null,"code":"var _jsxFileName = \"/Users/anshagrawal/Desktop/umb/frontend/src/contexts/CryptoContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useCallback } from 'react';\nimport CryptoJS from 'crypto-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CryptoContext = /*#__PURE__*/createContext();\nexport const useCrypto = () => {\n  _s();\n  return useContext(CryptoContext);\n};\n_s(useCrypto, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CryptoProvider = ({\n  children\n}) => {\n  _s2();\n  const [masterKey, setMasterKeyState] = useState(sessionStorage.getItem('umbra_master_key') || null);\n  const [privateKey, setPrivateKeyState] = useState(sessionStorage.getItem('umbra_private_key') || null);\n  const setMasterKey = key => {\n    if (key) {\n      sessionStorage.setItem('umbra_master_key', key);\n    } else {\n      sessionStorage.removeItem('umbra_master_key');\n    }\n    setMasterKeyState(key);\n  };\n  const setPrivateKey = key => {\n    if (key) {\n      sessionStorage.setItem('umbra_private_key', key);\n    } else {\n      sessionStorage.removeItem('umbra_private_key');\n    }\n    setPrivateKeyState(key);\n  };\n\n  // Generate a random key\n  const generateKey = useCallback(() => {\n    return CryptoJS.lib.WordArray.random(32).toString();\n  }, []);\n\n  // Derive encryption key from password\n  const deriveKeyFromPassword = useCallback((password, salt) => {\n    return CryptoJS.PBKDF2(password, salt, {\n      keySize: 256 / 32,\n      iterations: 100000\n    }).toString();\n  }, []);\n\n  // Encrypt data with AES\n  const encrypt = useCallback((data, key) => {\n    const iv = CryptoJS.lib.WordArray.random(16);\n    const encrypted = CryptoJS.AES.encrypt(data, key, {\n      iv\n    });\n    return {\n      ciphertext: encrypted.toString(),\n      iv: iv.toString(),\n      algorithm: 'AES-CBC'\n    };\n  }, []);\n\n  // Decrypt data with AES\n  const decrypt = useCallback((ciphertext, key, iv) => {\n    const decrypted = CryptoJS.AES.decrypt(ciphertext, key, {\n      iv: CryptoJS.enc.Hex.parse(iv)\n    });\n    return decrypted.toString(CryptoJS.enc.Utf8);\n  }, []);\n\n  // Helper: Convert ArrayBuffer to Base64\n  const arrayBufferToBase64 = buffer => {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const len = bytes.byteLength;\n    for (let i = 0; i < len; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  };\n\n  // Helper: Convert Base64 to ArrayBuffer (Robust)\n  const base64ToArrayBuffer = base64 => {\n    try {\n      // 1. Clean the input: remove ALL whitespace and characters not in base64 alphabet\n      // Base64 alphabet: A-Z, a-z, 0-9, +, / and = for padding\n      // Also handle URL-safe base64 (- and _)\n      const cleaned = base64.replace(/\\s/g, '').replace(/-/g, '+').replace(/_/g, '/').replace(/[^A-Za-z0-9+/=]/g, ''); // REMOVE EVERYTHING ELSE (headers, etc)\n\n      // 2. Fix padding\n      const padded = cleaned.padEnd(cleaned.length + (4 - cleaned.length % 4) % 4, '=');\n      const binary_string = window.atob(padded);\n      const len = binary_string.length;\n      const bytes = new Uint8Array(len);\n      for (let i = 0; i < len; i++) {\n        bytes[i] = binary_string.charCodeAt(i);\n      }\n      return bytes.buffer;\n    } catch (e) {\n      console.error('base64ToArrayBuffer failed for string:', base64.substring(0, 50) + '...', e);\n      throw new Error('Invalid encryption data format (Base64 error)');\n    }\n  };\n\n  // Helper: Export Key to PEM format\n  const exportKeyToPEM = async (key, type) => {\n    const exported = await window.crypto.subtle.exportKey(type === 'public' ? 'spki' : 'pkcs8', key);\n    const exportedAsString = arrayBufferToBase64(exported);\n    const pemExported = `-----BEGIN ${type.toUpperCase()} KEY-----\\n${exportedAsString.match(/.{1,64}/g).join('\\n')}\\n-----END ${type.toUpperCase()} KEY-----`;\n    return pemExported;\n  };\n\n  // Helper: Import Key from PEM format (Robust)\n  const importKeyFromPEM = async (pem, type) => {\n    if (!pem || typeof pem !== 'string') {\n      throw new Error(`Missing ${type} key data`);\n    }\n\n    // Remove PEM header/footer if they exist, and extract contents\n    const pemHeader = `-----BEGIN ${type.toUpperCase()} KEY-----`;\n    const pemFooter = `-----END ${type.toUpperCase()} KEY-----`;\n    let pemContents = pem;\n    if (pem.includes(pemHeader)) {\n      const startIndex = pem.indexOf(pemHeader) + pemHeader.length;\n      const endIndex = pem.indexOf(pemFooter);\n      if (endIndex !== -1) {\n        pemContents = pem.substring(startIndex, endIndex);\n      } else {\n        pemContents = pem.substring(startIndex);\n      }\n    }\n\n    // Final cleanup of whitespace/newlines\n    const base64 = pemContents.trim().replace(/\\s/g, '');\n    try {\n      console.log(`ðŸ” Crypto: Importing ${type} key, base64 length:`, base64.length);\n      const binaryDer = base64ToArrayBuffer(base64);\n      return await window.crypto.subtle.importKey(type === 'public' ? 'spki' : 'pkcs8', binaryDer, {\n        name: \"RSA-OAEP\",\n        hash: \"SHA-256\"\n      }, true, [type === 'public' ? \"encrypt\" : \"decrypt\"]);\n    } catch (e) {\n      console.error(`âŒ Import ${type} key failed:`, e);\n      console.error(`âŒ Bad ${type} key start:`, base64.substring(0, 30));\n      console.error(`âŒ Bad ${type} key end:`, base64.substring(base64.length - 30));\n      throw new Error(`Could not process ${type} encryption key. Possible corruption or incorrect format.`);\n    }\n  };\n\n  // Generate RSA key pair using Web Crypto API\n  const generateRSAKeyPair = useCallback(async () => {\n    const keyPair = await window.crypto.subtle.generateKey({\n      name: \"RSA-OAEP\",\n      modulusLength: 2048,\n      publicExponent: new Uint8Array([1, 0, 1]),\n      hash: \"SHA-256\"\n    }, true, [\"encrypt\", \"decrypt\"]);\n    const publicKeyPEM = await exportKeyToPEM(keyPair.publicKey, 'public');\n    const privateKeyPEM = await exportKeyToPEM(keyPair.privateKey, 'private');\n    return {\n      publicKey: publicKeyPEM,\n      privateKey: privateKeyPEM\n    };\n  }, []);\n\n  // Encrypt symmetric key with RSA public key\n  const encryptWithPublicKey = useCallback(async (data, publicKeyPEM) => {\n    try {\n      const publicKey = await importKeyFromPEM(publicKeyPEM, 'public');\n      const encodedData = new TextEncoder().encode(data);\n      const encryptedData = await window.crypto.subtle.encrypt({\n        name: \"RSA-OAEP\"\n      }, publicKey, encodedData);\n      return arrayBufferToBase64(encryptedData);\n    } catch (error) {\n      console.error('Encryption with public key failed:', error);\n      throw error;\n    }\n  }, []);\n\n  // Decrypt symmetric key with RSA private key\n  const decryptWithPrivateKey = useCallback(async (encryptedData, privateKeyPEM) => {\n    try {\n      const privateKey = await importKeyFromPEM(privateKeyPEM, 'private');\n      const encryptedBuffer = base64ToArrayBuffer(encryptedData);\n      const decryptedBuffer = await window.crypto.subtle.decrypt({\n        name: \"RSA-OAEP\"\n      }, privateKey, encryptedBuffer);\n      return new TextDecoder().decode(decryptedBuffer);\n    } catch (error) {\n      console.error('Decryption with private key failed:', error);\n      throw error;\n    }\n  }, []);\n\n  // Expose helpers for external use if needed\n  const exportPublicKey = key => exportKeyToPEM(key, 'public');\n  const exportPrivateKey = key => exportKeyToPEM(key, 'private');\n  const importPublicKey = pem => importKeyFromPEM(pem, 'public');\n  const importPrivateKey = pem => importKeyFromPEM(pem, 'private');\n  const value = {\n    masterKey,\n    setMasterKey,\n    privateKey,\n    setPrivateKey,\n    generateKey,\n    deriveKeyFromPassword,\n    encrypt,\n    decrypt,\n    generateRSAKeyPair,\n    encryptWithPublicKey,\n    decryptWithPrivateKey,\n    exportPublicKey,\n    exportPrivateKey,\n    importPublicKey,\n    importPrivateKey\n  };\n  return /*#__PURE__*/_jsxDEV(CryptoContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 5\n  }, this);\n};\n_s2(CryptoProvider, \"kyhdTW+81LMQD1cME6UlQHjAyOI=\");\n_c = CryptoProvider;\nvar _c;\n$RefreshReg$(_c, \"CryptoProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useCallback","CryptoJS","jsxDEV","_jsxDEV","CryptoContext","useCrypto","_s","CryptoProvider","children","_s2","masterKey","setMasterKeyState","sessionStorage","getItem","privateKey","setPrivateKeyState","setMasterKey","key","setItem","removeItem","setPrivateKey","generateKey","lib","WordArray","random","toString","deriveKeyFromPassword","password","salt","PBKDF2","keySize","iterations","encrypt","data","iv","encrypted","AES","ciphertext","algorithm","decrypt","decrypted","enc","Hex","parse","Utf8","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","window","btoa","base64ToArrayBuffer","base64","cleaned","replace","padded","padEnd","length","binary_string","atob","charCodeAt","e","console","error","substring","Error","exportKeyToPEM","type","exported","crypto","subtle","exportKey","exportedAsString","pemExported","toUpperCase","match","join","importKeyFromPEM","pem","pemHeader","pemFooter","pemContents","includes","startIndex","indexOf","endIndex","trim","log","binaryDer","importKey","name","hash","generateRSAKeyPair","keyPair","modulusLength","publicExponent","publicKeyPEM","publicKey","privateKeyPEM","encryptWithPublicKey","encodedData","TextEncoder","encode","encryptedData","decryptWithPrivateKey","encryptedBuffer","decryptedBuffer","TextDecoder","decode","exportPublicKey","exportPrivateKey","importPublicKey","importPrivateKey","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/anshagrawal/Desktop/umb/frontend/src/contexts/CryptoContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useCallback } from 'react';\nimport CryptoJS from 'crypto-js';\n\nconst CryptoContext = createContext();\n\nexport const useCrypto = () => useContext(CryptoContext);\n\nexport const CryptoProvider = ({ children }) => {\n  const [masterKey, setMasterKeyState] = useState(sessionStorage.getItem('umbra_master_key') || null);\n  const [privateKey, setPrivateKeyState] = useState(sessionStorage.getItem('umbra_private_key') || null);\n\n  const setMasterKey = (key) => {\n    if (key) {\n      sessionStorage.setItem('umbra_master_key', key);\n    } else {\n      sessionStorage.removeItem('umbra_master_key');\n    }\n    setMasterKeyState(key);\n  };\n\n  const setPrivateKey = (key) => {\n    if (key) {\n      sessionStorage.setItem('umbra_private_key', key);\n    } else {\n      sessionStorage.removeItem('umbra_private_key');\n    }\n    setPrivateKeyState(key);\n  };\n\n  // Generate a random key\n  const generateKey = useCallback(() => {\n    return CryptoJS.lib.WordArray.random(32).toString();\n  }, []);\n\n  // Derive encryption key from password\n  const deriveKeyFromPassword = useCallback((password, salt) => {\n    return CryptoJS.PBKDF2(password, salt, {\n      keySize: 256 / 32,\n      iterations: 100000\n    }).toString();\n  }, []);\n\n  // Encrypt data with AES\n  const encrypt = useCallback((data, key) => {\n    const iv = CryptoJS.lib.WordArray.random(16);\n    const encrypted = CryptoJS.AES.encrypt(data, key, { iv });\n\n    return {\n      ciphertext: encrypted.toString(),\n      iv: iv.toString(),\n      algorithm: 'AES-CBC'\n    };\n  }, []);\n\n  // Decrypt data with AES\n  const decrypt = useCallback((ciphertext, key, iv) => {\n    const decrypted = CryptoJS.AES.decrypt(ciphertext, key, { iv: CryptoJS.enc.Hex.parse(iv) });\n    return decrypted.toString(CryptoJS.enc.Utf8);\n  }, []);\n\n  // Helper: Convert ArrayBuffer to Base64\n  const arrayBufferToBase64 = (buffer) => {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const len = bytes.byteLength;\n    for (let i = 0; i < len; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  };\n\n  // Helper: Convert Base64 to ArrayBuffer (Robust)\n  const base64ToArrayBuffer = (base64) => {\n    try {\n      // 1. Clean the input: remove ALL whitespace and characters not in base64 alphabet\n      // Base64 alphabet: A-Z, a-z, 0-9, +, / and = for padding\n      // Also handle URL-safe base64 (- and _)\n      const cleaned = base64\n        .replace(/\\s/g, '')\n        .replace(/-/g, '+')\n        .replace(/_/g, '/')\n        .replace(/[^A-Za-z0-9+/=]/g, ''); // REMOVE EVERYTHING ELSE (headers, etc)\n\n      // 2. Fix padding\n      const padded = cleaned.padEnd(cleaned.length + (4 - cleaned.length % 4) % 4, '=');\n\n      const binary_string = window.atob(padded);\n      const len = binary_string.length;\n      const bytes = new Uint8Array(len);\n      for (let i = 0; i < len; i++) {\n        bytes[i] = binary_string.charCodeAt(i);\n      }\n      return bytes.buffer;\n    } catch (e) {\n      console.error('base64ToArrayBuffer failed for string:', base64.substring(0, 50) + '...', e);\n      throw new Error('Invalid encryption data format (Base64 error)');\n    }\n  };\n\n  // Helper: Export Key to PEM format\n  const exportKeyToPEM = async (key, type) => {\n    const exported = await window.crypto.subtle.exportKey(\n      type === 'public' ? 'spki' : 'pkcs8',\n      key\n    );\n    const exportedAsString = arrayBufferToBase64(exported);\n    const pemExported = `-----BEGIN ${type.toUpperCase()} KEY-----\\n${exportedAsString.match(/.{1,64}/g).join('\\n')}\\n-----END ${type.toUpperCase()} KEY-----`;\n    return pemExported;\n  };\n\n  // Helper: Import Key from PEM format (Robust)\n  const importKeyFromPEM = async (pem, type) => {\n    if (!pem || typeof pem !== 'string') {\n      throw new Error(`Missing ${type} key data`);\n    }\n\n    // Remove PEM header/footer if they exist, and extract contents\n    const pemHeader = `-----BEGIN ${type.toUpperCase()} KEY-----`;\n    const pemFooter = `-----END ${type.toUpperCase()} KEY-----`;\n\n    let pemContents = pem;\n    if (pem.includes(pemHeader)) {\n      const startIndex = pem.indexOf(pemHeader) + pemHeader.length;\n      const endIndex = pem.indexOf(pemFooter);\n      if (endIndex !== -1) {\n        pemContents = pem.substring(startIndex, endIndex);\n      } else {\n        pemContents = pem.substring(startIndex);\n      }\n    }\n\n    // Final cleanup of whitespace/newlines\n    const base64 = pemContents.trim().replace(/\\s/g, '');\n\n    try {\n      console.log(`ðŸ” Crypto: Importing ${type} key, base64 length:`, base64.length);\n      const binaryDer = base64ToArrayBuffer(base64);\n      return await window.crypto.subtle.importKey(\n        type === 'public' ? 'spki' : 'pkcs8',\n        binaryDer,\n        {\n          name: \"RSA-OAEP\",\n          hash: \"SHA-256\"\n        },\n        true,\n        [type === 'public' ? \"encrypt\" : \"decrypt\"]\n      );\n    } catch (e) {\n      console.error(`âŒ Import ${type} key failed:`, e);\n      console.error(`âŒ Bad ${type} key start:`, base64.substring(0, 30));\n      console.error(`âŒ Bad ${type} key end:`, base64.substring(base64.length - 30));\n      throw new Error(`Could not process ${type} encryption key. Possible corruption or incorrect format.`);\n    }\n  };\n\n  // Generate RSA key pair using Web Crypto API\n  const generateRSAKeyPair = useCallback(async () => {\n    const keyPair = await window.crypto.subtle.generateKey(\n      {\n        name: \"RSA-OAEP\",\n        modulusLength: 2048,\n        publicExponent: new Uint8Array([1, 0, 1]),\n        hash: \"SHA-256\"\n      },\n      true,\n      [\"encrypt\", \"decrypt\"]\n    );\n\n    const publicKeyPEM = await exportKeyToPEM(keyPair.publicKey, 'public');\n    const privateKeyPEM = await exportKeyToPEM(keyPair.privateKey, 'private');\n\n    return {\n      publicKey: publicKeyPEM,\n      privateKey: privateKeyPEM\n    };\n  }, []);\n\n  // Encrypt symmetric key with RSA public key\n  const encryptWithPublicKey = useCallback(async (data, publicKeyPEM) => {\n    try {\n      const publicKey = await importKeyFromPEM(publicKeyPEM, 'public');\n      const encodedData = new TextEncoder().encode(data);\n\n      const encryptedData = await window.crypto.subtle.encrypt(\n        {\n          name: \"RSA-OAEP\"\n        },\n        publicKey,\n        encodedData\n      );\n\n      return arrayBufferToBase64(encryptedData);\n    } catch (error) {\n      console.error('Encryption with public key failed:', error);\n      throw error;\n    }\n  }, []);\n\n  // Decrypt symmetric key with RSA private key\n  const decryptWithPrivateKey = useCallback(async (encryptedData, privateKeyPEM) => {\n    try {\n      const privateKey = await importKeyFromPEM(privateKeyPEM, 'private');\n      const encryptedBuffer = base64ToArrayBuffer(encryptedData);\n\n      const decryptedBuffer = await window.crypto.subtle.decrypt(\n        {\n          name: \"RSA-OAEP\"\n        },\n        privateKey,\n        encryptedBuffer\n      );\n\n      return new TextDecoder().decode(decryptedBuffer);\n    } catch (error) {\n      console.error('Decryption with private key failed:', error);\n      throw error;\n    }\n  }, []);\n\n  // Expose helpers for external use if needed\n  const exportPublicKey = (key) => exportKeyToPEM(key, 'public');\n  const exportPrivateKey = (key) => exportKeyToPEM(key, 'private');\n  const importPublicKey = (pem) => importKeyFromPEM(pem, 'public');\n  const importPrivateKey = (pem) => importKeyFromPEM(pem, 'private');\n\n  const value = {\n    masterKey,\n    setMasterKey,\n    privateKey,\n    setPrivateKey,\n    generateKey,\n    deriveKeyFromPassword,\n    encrypt,\n    decrypt,\n    generateRSAKeyPair,\n    encryptWithPublicKey,\n    decryptWithPrivateKey,\n    exportPublicKey,\n    exportPrivateKey,\n    importPublicKey,\n    importPrivateKey\n  };\n\n  return (\n    <CryptoContext.Provider value={value}>\n      {children}\n    </CryptoContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}