{"ast":null,"code":"var _jsxFileName = \"/Users/anshagrawal/Desktop/umb/frontend/src/contexts/CryptoContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useCallback } from 'react';\nimport CryptoJS from 'crypto-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CryptoContext = /*#__PURE__*/createContext();\nexport const useCrypto = () => {\n  _s();\n  return useContext(CryptoContext);\n};\n_s(useCrypto, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CryptoProvider = ({\n  children\n}) => {\n  _s2();\n  const [masterKey, setMasterKeyState] = useState(sessionStorage.getItem('umbra_master_key') || null);\n  const [privateKey, setPrivateKeyState] = useState(sessionStorage.getItem('umbra_private_key') || null);\n  const setMasterKey = key => {\n    if (key) {\n      sessionStorage.setItem('umbra_master_key', key);\n    } else {\n      sessionStorage.removeItem('umbra_master_key');\n    }\n    setMasterKeyState(key);\n  };\n  const setPrivateKey = key => {\n    if (key) {\n      sessionStorage.setItem('umbra_private_key', key);\n    } else {\n      sessionStorage.removeItem('umbra_private_key');\n    }\n    setPrivateKeyState(key);\n  };\n\n  // Generate a random key\n  const generateKey = useCallback(() => {\n    return CryptoJS.lib.WordArray.random(32).toString();\n  }, []);\n\n  // Derive encryption key from password\n  const deriveKeyFromPassword = useCallback((password, salt) => {\n    return CryptoJS.PBKDF2(password, salt, {\n      keySize: 256 / 32,\n      iterations: 100000\n    }).toString();\n  }, []);\n\n  // Encrypt data with AES\n  const encrypt = useCallback((data, key) => {\n    const iv = CryptoJS.lib.WordArray.random(16);\n    const encrypted = CryptoJS.AES.encrypt(data, key, {\n      iv\n    });\n    return {\n      ciphertext: encrypted.toString(),\n      iv: iv.toString(),\n      algorithm: 'AES-CBC'\n    };\n  }, []);\n\n  // Decrypt data with AES\n  const decrypt = useCallback((ciphertext, key, iv) => {\n    const decrypted = CryptoJS.AES.decrypt(ciphertext, key, {\n      iv: CryptoJS.enc.Hex.parse(iv)\n    });\n    return decrypted.toString(CryptoJS.enc.Utf8);\n  }, []);\n\n  // Helper: Convert ArrayBuffer to Base64\n  const arrayBufferToBase64 = buffer => {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const len = bytes.byteLength;\n    for (let i = 0; i < len; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  };\n\n  // Helper: Convert Base64 to ArrayBuffer (Robust)\n  const base64ToArrayBuffer = base64 => {\n    try {\n      // 1. Clean the input: remove ALL whitespace\n      const cleaned = base64.replace(/\\s/g, '');\n\n      // 2. Validate base64 characters only\n      if (!/^[A-Za-z0-9+/=]*$/.test(cleaned)) {\n        console.error('Invalid characters in base64 string');\n        throw new Error('Invalid base64 characters');\n      }\n\n      // 3. Fix padding\n      const padded = cleaned.length % 4 === 0 ? cleaned : cleaned.padEnd(cleaned.length + (4 - cleaned.length % 4) % 4, '=');\n      const binary_string = window.atob(padded);\n      const len = binary_string.length;\n      const bytes = new Uint8Array(len);\n      for (let i = 0; i < len; i++) {\n        bytes[i] = binary_string.charCodeAt(i);\n      }\n      return bytes.buffer;\n    } catch (e) {\n      console.error('base64ToArrayBuffer failed:', e);\n      throw new Error('Invalid encryption data format (Base64 error)');\n    }\n  };\n\n  // Helper: Export Key to PEM format\n  const exportKeyToPEM = async (key, type) => {\n    const exported = await window.crypto.subtle.exportKey(type === 'public' ? 'spki' : 'pkcs8', key);\n    const exportedAsString = arrayBufferToBase64(exported);\n    const pemExported = `-----BEGIN ${type.toUpperCase()} KEY-----\\n${exportedAsString.match(/.{1,64}/g).join('\\n')}\\n-----END ${type.toUpperCase()} KEY-----`;\n    return pemExported;\n  };\n\n  // Helper: Import Key from PEM format (Robust)\n  const importKeyFromPEM = async (pem, type) => {\n    if (!pem || typeof pem !== 'string') {\n      console.error(`Missing ${type} key data:`, pem);\n      throw new Error(`Missing ${type} key data`);\n    }\n\n    // ROBUST: Remove ALL dashes and the words between them (headers/footers)\n    // and all whitespace. This handles:\n    // -----BEGIN PUBLIC KEY-----\n    // -----BEGIN RSA PUBLIC KEY-----\n    // and any other variation\n    const base64 = pem.replace(/-----BEGIN.*?-----/g, '').replace(/-----END.*?-----/g, '').replace(/\\s/g, '');\n    try {\n      console.log(`ðŸ” Crypto: Importing ${type} key, base64 length:`, base64.length);\n      const binaryDer = base64ToArrayBuffer(base64);\n      return await window.crypto.subtle.importKey(type === 'public' ? 'spki' : 'pkcs8', binaryDer, {\n        name: \"RSA-OAEP\",\n        hash: \"SHA-256\"\n      }, true, [type === 'public' ? \"encrypt\" : \"decrypt\"]);\n    } catch (e) {\n      console.error(`âŒ Import ${type} key failed:`, e);\n      console.error(`âŒ Bad ${type} key start:`, base64.substring(0, 30));\n      console.error(`âŒ Bad ${type} key end:`, base64.substring(base64.length - 30));\n      throw new Error(`Could not process ${type} encryption key. Possible corruption or incorrect format.`);\n    }\n  };\n\n  // Generate RSA key pair using Web Crypto API\n  const generateRSAKeyPair = useCallback(async () => {\n    const keyPair = await window.crypto.subtle.generateKey({\n      name: \"RSA-OAEP\",\n      modulusLength: 2048,\n      publicExponent: new Uint8Array([1, 0, 1]),\n      hash: \"SHA-256\"\n    }, true, [\"encrypt\", \"decrypt\"]);\n    const publicKeyPEM = await exportKeyToPEM(keyPair.publicKey, 'public');\n    const privateKeyPEM = await exportKeyToPEM(keyPair.privateKey, 'private');\n    return {\n      publicKey: publicKeyPEM,\n      privateKey: privateKeyPEM\n    };\n  }, []);\n\n  // Encrypt symmetric key with RSA public key\n  const encryptWithPublicKey = useCallback(async (data, publicKeyPEM) => {\n    try {\n      const publicKey = await importKeyFromPEM(publicKeyPEM, 'public');\n      const encodedData = new TextEncoder().encode(data);\n      const encryptedData = await window.crypto.subtle.encrypt({\n        name: \"RSA-OAEP\"\n      }, publicKey, encodedData);\n      return arrayBufferToBase64(encryptedData);\n    } catch (error) {\n      console.error('Encryption with public key failed:', error);\n      throw error;\n    }\n  }, []);\n\n  // Decrypt symmetric key with RSA private key\n  const decryptWithPrivateKey = useCallback(async (encryptedData, privateKeyPEM) => {\n    try {\n      const privateKey = await importKeyFromPEM(privateKeyPEM, 'private');\n      const encryptedBuffer = base64ToArrayBuffer(encryptedData);\n      const decryptedBuffer = await window.crypto.subtle.decrypt({\n        name: \"RSA-OAEP\"\n      }, privateKey, encryptedBuffer);\n      return new TextDecoder().decode(decryptedBuffer);\n    } catch (error) {\n      console.error('Decryption with private key failed:', error);\n      throw error;\n    }\n  }, []);\n\n  // Expose helpers for external use if needed\n  const exportPublicKey = key => exportKeyToPEM(key, 'public');\n  const exportPrivateKey = key => exportKeyToPEM(key, 'private');\n  const importPublicKey = pem => importKeyFromPEM(pem, 'public');\n  const importPrivateKey = pem => importKeyFromPEM(pem, 'private');\n  const value = {\n    masterKey,\n    setMasterKey,\n    privateKey,\n    setPrivateKey,\n    generateKey,\n    deriveKeyFromPassword,\n    encrypt,\n    decrypt,\n    generateRSAKeyPair,\n    encryptWithPublicKey,\n    decryptWithPrivateKey,\n    exportPublicKey,\n    exportPrivateKey,\n    importPublicKey,\n    importPrivateKey\n  };\n  return /*#__PURE__*/_jsxDEV(CryptoContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 238,\n    columnNumber: 5\n  }, this);\n};\n_s2(CryptoProvider, \"kyhdTW+81LMQD1cME6UlQHjAyOI=\");\n_c = CryptoProvider;\nvar _c;\n$RefreshReg$(_c, \"CryptoProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useCallback","CryptoJS","jsxDEV","_jsxDEV","CryptoContext","useCrypto","_s","CryptoProvider","children","_s2","masterKey","setMasterKeyState","sessionStorage","getItem","privateKey","setPrivateKeyState","setMasterKey","key","setItem","removeItem","setPrivateKey","generateKey","lib","WordArray","random","toString","deriveKeyFromPassword","password","salt","PBKDF2","keySize","iterations","encrypt","data","iv","encrypted","AES","ciphertext","algorithm","decrypt","decrypted","enc","Hex","parse","Utf8","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","window","btoa","base64ToArrayBuffer","base64","cleaned","replace","test","console","error","Error","padded","length","padEnd","binary_string","atob","charCodeAt","e","exportKeyToPEM","type","exported","crypto","subtle","exportKey","exportedAsString","pemExported","toUpperCase","match","join","importKeyFromPEM","pem","log","binaryDer","importKey","name","hash","substring","generateRSAKeyPair","keyPair","modulusLength","publicExponent","publicKeyPEM","publicKey","privateKeyPEM","encryptWithPublicKey","encodedData","TextEncoder","encode","encryptedData","decryptWithPrivateKey","encryptedBuffer","decryptedBuffer","TextDecoder","decode","exportPublicKey","exportPrivateKey","importPublicKey","importPrivateKey","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/anshagrawal/Desktop/umb/frontend/src/contexts/CryptoContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useCallback } from 'react';\nimport CryptoJS from 'crypto-js';\n\nconst CryptoContext = createContext();\n\nexport const useCrypto = () => useContext(CryptoContext);\n\nexport const CryptoProvider = ({ children }) => {\n  const [masterKey, setMasterKeyState] = useState(sessionStorage.getItem('umbra_master_key') || null);\n  const [privateKey, setPrivateKeyState] = useState(sessionStorage.getItem('umbra_private_key') || null);\n\n  const setMasterKey = (key) => {\n    if (key) {\n      sessionStorage.setItem('umbra_master_key', key);\n    } else {\n      sessionStorage.removeItem('umbra_master_key');\n    }\n    setMasterKeyState(key);\n  };\n\n  const setPrivateKey = (key) => {\n    if (key) {\n      sessionStorage.setItem('umbra_private_key', key);\n    } else {\n      sessionStorage.removeItem('umbra_private_key');\n    }\n    setPrivateKeyState(key);\n  };\n\n  // Generate a random key\n  const generateKey = useCallback(() => {\n    return CryptoJS.lib.WordArray.random(32).toString();\n  }, []);\n\n  // Derive encryption key from password\n  const deriveKeyFromPassword = useCallback((password, salt) => {\n    return CryptoJS.PBKDF2(password, salt, {\n      keySize: 256 / 32,\n      iterations: 100000\n    }).toString();\n  }, []);\n\n  // Encrypt data with AES\n  const encrypt = useCallback((data, key) => {\n    const iv = CryptoJS.lib.WordArray.random(16);\n    const encrypted = CryptoJS.AES.encrypt(data, key, { iv });\n\n    return {\n      ciphertext: encrypted.toString(),\n      iv: iv.toString(),\n      algorithm: 'AES-CBC'\n    };\n  }, []);\n\n  // Decrypt data with AES\n  const decrypt = useCallback((ciphertext, key, iv) => {\n    const decrypted = CryptoJS.AES.decrypt(ciphertext, key, { iv: CryptoJS.enc.Hex.parse(iv) });\n    return decrypted.toString(CryptoJS.enc.Utf8);\n  }, []);\n\n  // Helper: Convert ArrayBuffer to Base64\n  const arrayBufferToBase64 = (buffer) => {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const len = bytes.byteLength;\n    for (let i = 0; i < len; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  };\n\n  // Helper: Convert Base64 to ArrayBuffer (Robust)\n  const base64ToArrayBuffer = (base64) => {\n    try {\n      // 1. Clean the input: remove ALL whitespace\n      const cleaned = base64.replace(/\\s/g, '');\n\n      // 2. Validate base64 characters only\n      if (!/^[A-Za-z0-9+/=]*$/.test(cleaned)) {\n        console.error('Invalid characters in base64 string');\n        throw new Error('Invalid base64 characters');\n      }\n\n      // 3. Fix padding\n      const padded = cleaned.length % 4 === 0 ? cleaned : cleaned.padEnd(cleaned.length + (4 - cleaned.length % 4) % 4, '=');\n\n      const binary_string = window.atob(padded);\n      const len = binary_string.length;\n      const bytes = new Uint8Array(len);\n      for (let i = 0; i < len; i++) {\n        bytes[i] = binary_string.charCodeAt(i);\n      }\n      return bytes.buffer;\n    } catch (e) {\n      console.error('base64ToArrayBuffer failed:', e);\n      throw new Error('Invalid encryption data format (Base64 error)');\n    }\n  };\n\n  // Helper: Export Key to PEM format\n  const exportKeyToPEM = async (key, type) => {\n    const exported = await window.crypto.subtle.exportKey(\n      type === 'public' ? 'spki' : 'pkcs8',\n      key\n    );\n    const exportedAsString = arrayBufferToBase64(exported);\n    const pemExported = `-----BEGIN ${type.toUpperCase()} KEY-----\\n${exportedAsString.match(/.{1,64}/g).join('\\n')}\\n-----END ${type.toUpperCase()} KEY-----`;\n    return pemExported;\n  };\n\n  // Helper: Import Key from PEM format (Robust)\n  const importKeyFromPEM = async (pem, type) => {\n    if (!pem || typeof pem !== 'string') {\n      console.error(`Missing ${type} key data:`, pem);\n      throw new Error(`Missing ${type} key data`);\n    }\n\n    // ROBUST: Remove ALL dashes and the words between them (headers/footers)\n    // and all whitespace. This handles:\n    // -----BEGIN PUBLIC KEY-----\n    // -----BEGIN RSA PUBLIC KEY-----\n    // and any other variation\n    const base64 = pem\n      .replace(/-----BEGIN.*?-----/g, '')\n      .replace(/-----END.*?-----/g, '')\n      .replace(/\\s/g, '');\n\n    try {\n      console.log(`ðŸ” Crypto: Importing ${type} key, base64 length:`, base64.length);\n      const binaryDer = base64ToArrayBuffer(base64);\n      return await window.crypto.subtle.importKey(\n        type === 'public' ? 'spki' : 'pkcs8',\n        binaryDer,\n        {\n          name: \"RSA-OAEP\",\n          hash: \"SHA-256\"\n        },\n        true,\n        [type === 'public' ? \"encrypt\" : \"decrypt\"]\n      );\n    } catch (e) {\n      console.error(`âŒ Import ${type} key failed:`, e);\n      console.error(`âŒ Bad ${type} key start:`, base64.substring(0, 30));\n      console.error(`âŒ Bad ${type} key end:`, base64.substring(base64.length - 30));\n      throw new Error(`Could not process ${type} encryption key. Possible corruption or incorrect format.`);\n    }\n  };\n\n  // Generate RSA key pair using Web Crypto API\n  const generateRSAKeyPair = useCallback(async () => {\n    const keyPair = await window.crypto.subtle.generateKey(\n      {\n        name: \"RSA-OAEP\",\n        modulusLength: 2048,\n        publicExponent: new Uint8Array([1, 0, 1]),\n        hash: \"SHA-256\"\n      },\n      true,\n      [\"encrypt\", \"decrypt\"]\n    );\n\n    const publicKeyPEM = await exportKeyToPEM(keyPair.publicKey, 'public');\n    const privateKeyPEM = await exportKeyToPEM(keyPair.privateKey, 'private');\n\n    return {\n      publicKey: publicKeyPEM,\n      privateKey: privateKeyPEM\n    };\n  }, []);\n\n  // Encrypt symmetric key with RSA public key\n  const encryptWithPublicKey = useCallback(async (data, publicKeyPEM) => {\n    try {\n      const publicKey = await importKeyFromPEM(publicKeyPEM, 'public');\n      const encodedData = new TextEncoder().encode(data);\n\n      const encryptedData = await window.crypto.subtle.encrypt(\n        {\n          name: \"RSA-OAEP\"\n        },\n        publicKey,\n        encodedData\n      );\n\n      return arrayBufferToBase64(encryptedData);\n    } catch (error) {\n      console.error('Encryption with public key failed:', error);\n      throw error;\n    }\n  }, []);\n\n  // Decrypt symmetric key with RSA private key\n  const decryptWithPrivateKey = useCallback(async (encryptedData, privateKeyPEM) => {\n    try {\n      const privateKey = await importKeyFromPEM(privateKeyPEM, 'private');\n      const encryptedBuffer = base64ToArrayBuffer(encryptedData);\n\n      const decryptedBuffer = await window.crypto.subtle.decrypt(\n        {\n          name: \"RSA-OAEP\"\n        },\n        privateKey,\n        encryptedBuffer\n      );\n\n      return new TextDecoder().decode(decryptedBuffer);\n    } catch (error) {\n      console.error('Decryption with private key failed:', error);\n      throw error;\n    }\n  }, []);\n\n  // Expose helpers for external use if needed\n  const exportPublicKey = (key) => exportKeyToPEM(key, 'public');\n  const exportPrivateKey = (key) => exportKeyToPEM(key, 'private');\n  const importPublicKey = (pem) => importKeyFromPEM(pem, 'public');\n  const importPrivateKey = (pem) => importKeyFromPEM(pem, 'private');\n\n  const value = {\n    masterKey,\n    setMasterKey,\n    privateKey,\n    setPrivateKey,\n    generateKey,\n    deriveKeyFromPassword,\n    encrypt,\n    decrypt,\n    generateRSAKeyPair,\n    encryptWithPublicKey,\n    decryptWithPrivateKey,\n    exportPublicKey,\n    exportPrivateKey,\n    importPublicKey,\n    importPrivateKey\n  };\n\n  return (\n    <CryptoContext.Provider value={value}>\n      {children}\n    </CryptoContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}